<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GETUM</title>

    <!--  bootstrap CSS -->
    <link rel="stylesheet" href="../css/bootstrap.min.css">

    <!-- google font -->
    <link href="https://fonts.googleapis.com/css?family=Noto+Sans+KR:500,700,900&display=swap&subset=korean" rel="stylesheet">

	<!--  custom CSS  -->
    <link rel="stylesheet" href="../css/style.css">
    <link rel="stylesheet" href="../css/fixed.css">

    <!--  font awesome icons  -->
    <link rel="stylesheet" href="../css/all.min.css">

    <!--  sweetalert2  -->
    <link rel="stylesheet" href="../css/sweetalert2.min.css">
</head>
<body>
<!--  ======================= Start Header Area ============================== -->
<header class="header-area mb-5">
    <nav class="navbar navbar-expand-lg fixed-top">
        <div class="container">
            <a class="navbar-brand" href="index.jsp"> <i class="fas fa-glass-whiskey"></i> GETUM</a>
            <button class="navbar-toggler d-lg-none" type="button" data-toggle="collapse" data-target="#collapsibleNavId" aria-controls="collapsibleNavId"
            aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"><i class="fa fa-bars"></i></span>
            </button>
        <div class="collapse navbar-collapse justify-content-end" id="collapsibleNavId">
            <ul class="nav">
                <li class="nav-item active">
                    <a class="nav-link" href="product.get">상품목록<span class="sr-only">(current)</span></a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#">장바구니</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#">주문내역</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#">고객센터</a>
                </li>

                <li class="nav-item mr-2">
                    <a class="nav-link btn btn-outline-secondary" href="login.jsp">로그인</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link btn btn-primary" href="signup.jsp">회원가입</a>
                </li>
                
            </ul>
        </div>
        </div>
    </nav>
</header>
<!--  ======================= End Header Area ============================== -->
<section class="productCreate pt-5">
    <div class="container">
        <div class="row">
            <div class="productCreateFormWrap mx-auto col-md-6 col-md-offset-3">
                <div class="heading pb-1 text-center pb-4">
                    <h1>상품등록</h1>
                </div>
                <div class="productCreateForm">
                    <form name="productCreateForm" action="productCreate.get" method="post" encType="multipart/form-data">
                        <div class="form-row mb-2">
                            <div class="form-group col-lg-6">
                                <label for="p_name">상품명</label>
                                <input type="text" class="form-control" placeholder="상품명을 입력해주세요" id="p_name" name="p_name">
                            </div>
                            <div class="form-group col-lg-6">
                                <label for="p_code">상품코드</label>
                                <input type="text" class="form-control" placeholder="상품코드를 입력해주세요" id="p_code" name="p_code">
                            </div>
                        </div>
                        <div class="form-row mb-2">
                            <div class="form-group col-lg-6">
                                <label for="p_price">상품가격</label>
                                <input type="text" class="form-control" placeholder="상품가격을 입력해주세요" id="p_price" name="p_price">
                            </div>
                            <div class="form-group col-lg-6">
                                <label for="p_manufacture">제조사</label>
                                <input type="text" class="form-control" placeholder="제조사를 입력해주세요" id="p_manufacture" name="p_manufacture">
                            </div>
                        </div>

                        
                        <div class="form-group mb-2">
                            <label for="p_stock">재고수량</label>
                            <input type="text" class="form-control" placeholder="재고수량을 입력해주세요" id="p_stock" name="p_stock">
                        </div>

                        <label>제품 출시일</label>
                        <div class="input-group mb-2">
                            <select name="year" class="form-control" id="select_year" onchange="javascript:lastday();">
                            </select>
                            <select class="form-control" name="month" id="select_month" onchange="javascript:lastday();">
                                <option value="" selected>월</option>
                              </select>
                              <select class="form-control" name="day" id="select_day">
                                <option value="" selected>일</option>
                              </select>
                        </div>
                        <label>카테고리</label>
                        <div class="form-group mb-2">
                            <div class="form-check form-check-inline">
                                <input class="form-check-input" type="checkbox" id="inlineCheckbox1" value="option1">
                                <label class="form-check-label" for="inlineCheckbox1">신상품</label>
                            </div>
                            <div class="form-check form-check-inline">
                                <input class="form-check-input" type="checkbox" id="inlineCheckbox2" value="option2">
                                <label class="form-check-label" for="inlineCheckbox2">인기상품</label>
                            </div>
                            <div class="form-check form-check-inline">
                                <input class="form-check-input" type="radio" name="inlineRadioOptions" id="inlineRadio1" value="option1">
                                <label class="form-check-label" for="inlineRadio1">스테인리스</label>
                              </div>
                              <div class="form-check form-check-inline">
                                <input class="form-check-input" type="radio" name="inlineRadioOptions" id="inlineRadio2" value="option2">
                                <label class="form-check-label" for="inlineRadio2">플라스틱</label>
                              </div>
                        </div>

                        <div class="form-group mb-2">
                            <label for="p_detail">상세설명</label>
                            <textarea class="form-control" id="p_detail"  name="p_detail" rows="8"></textarea>
                        </div>

                        <div class="custom-file mb-2">
                            <input type="file" class="custom-file-input" id="customFile" accept=".gif,.jpg,.png">
                            <label class="custom-file-label" for="customFile">이미지 파일을 업로드 하세요</label>
                        </div>
                        <button type="submit" class="btn btn-lg btn-primary w-100 mb-5">상품등록</button>
                    </form>
                </div>
            </div>
        </div>
    </div>
</section>
<!--  ======================= Start footer Area ================================ -->

<footer class="footer">
    <div class="text-center pt-4">
        <ul class="nav justify-content-center border-top">
            <li class="nav-item">
                <a href="#" class="nav-link">회사소개</a>
            </li>
            <li class="nav-item">
                <a href="#" class="nav-link">제휴문의</a>
            </li>
            <li class="nav-item">
                <a href="#" class="nav-link">공지사항</a>
            </li>
            <li class="nav-item">
                <a href="#" class="nav-link">고객의 소리</a>
            </li>
            <li class="nav-item">
                <a href="#" class="nav-link">이용약관</a>
            </li>
            <li class="nav-item">
                <a href="productCreate.jsp" class="nav-link">개인정보 처리방침</a>
            </li>
        </ul>
    </div>
    <div class="copyright text-center border-top text-muted py-2">
        <p class="mb-0">Made by Goo &copy; 2020</p>
    </div>
</footer>

<!--  ======================= END footer Area ================================ -->


<!--  Jquery js file  -->
<script src="../js/jquery.3.4.1.js"></script>

<!--  Bootstrap js file  -->
<script src="../js/bootstrap.min.js"></script>

<!--  sweetalert2 js file  -->
<script src="../js/sweetalert2.min.js"></script>

<script>
//==========================================================================================================
// 선택 파일명 표시
//==========================================================================================================
    // Add the following code if you want the name of the file appear on select
    $(".custom-file-input").on("change", function() {
        var fileName = $(this).val().split("\\").pop();
        $(this).siblings(".custom-file-label").addClass("selected").html(fileName);
    });
//==========================================================================================================

//==========================================================================================================
// 파일 확장자 경고
//==========================================================================================================
    var fileInput = document.getElementById("customFile");
    var allowedExtension1 = ".jpg";
    var allowedExtension2 = ".png";
    var allowedExtension3 = ".gif";

    fileInput.addEventListener("change", function() {
    // Check that the file extension is supported.
    // If not, clear the input.
    var hasInvalidFiles = false;
    for (var i = 0; i < this.files.length; i++) {
        var file = this.files[i];
        
        if ( !( file.name.endsWith(allowedExtension1) || file.name.endsWith(allowedExtension2) ||file.name.endsWith(allowedExtension3) ) ) {
        hasInvalidFiles = true;
        }
    }
    
    if(hasInvalidFiles) {
        fileInput.value = ""; 
        Swal.fire({
			  		  position: 'center',
			  		  icon: 'error',
			  		  title: "jpg, png, gif 파일만 업로드 가능합니다."
					});
        $(this).siblings(".custom-file-label").addClass("selected").html("이미지 파일을 업로드 하세요");
    }
    });
//==========================================================================================================

//==========================================================================================================
//선택한 년과 월에 따라 마지막 일 구하기
//==========================================================================================================
var today = new Date();
var today_year= today.getFullYear();
var start_year= today_year-20;// 시작할 년도
var target_year = today_year-30;
var index=0;
for(var y=start_year; y<=today_year; y++){ //start_year ~ 현재 년도
	
	if(y==target_year){
		document.getElementById('select_year').options[index] = new Option(y, y, false, true);
		index++;
	}else{
		document.getElementById('select_year').options[index] = new Option(y, y);
		index++;
	}
}
index=1;
for(var m=1; m<=12; m++){
	document.getElementById('select_month').options[index] = new Option(m, m);
	index++;
}

lastday();

function lastday(){ //년과 월에 따라 마지막 일 구하기 
	var Year=document.getElementById('select_year').value;
	var Month=document.getElementById('select_month').value;
	/*
	86400000ms는 1day를 의미한다.
	1s = 1,000ms
	1m = 60s * 1,000ms = 60,000ms
	1h = 60m * 60,000ms = 3,600,000ms
	1d = 24h * 3,600,000ms = 86,400,000ms
	
	new Date(year, month[, day, hour, minute, second, millisecond])
	new Date(2019, 4) ---> Wed May 01 2019 00:00:00 GMT+0900 (한국 표준시)
	
	아래는 코드는
	month가 0~11이다 보니 선택한 month는 실제 month+1이다
	선택한 월 1일에서 1day(86400000)를 빼주면
	실제 month의 말일 date를 가져올 수 있다.
	*/
	var day=new Date(new Date(Year,Month,1)-86400000).getDate();
	
	var dayindex_len=document.getElementById('select_day').length;
	
	// 월과 일 selectbox에 기본적으로 '월', '일'이 있음
	// 이거 생각해서 계산 
	if(dayindex_len!=1){
		if(day>=dayindex_len){//바뀐 year, month의 말일이 지금 셀렉트사이즈보다 같거나 크면
			for(var i=(dayindex_len); i<=day; i++){
				document.getElementById('select_day').options[i] = new Option(i, i);
			}
		}
		else if(day<dayindex_len){//바뀐 year, month의 말일이 지금 셀렉트사이즈보다 작으면
			for(var i=dayindex_len-1; i>=day; i--){
				document.getElementById('select_day').options[i+1]=null;
			}
		}
	}else{
		for(var i=1; i<=day; i++){//최초 실행
			document.getElementById('select_day').options[i] = new Option(i, i);
		}
	}
}
//==========================================================================================================
</script>
    
</body>
</html>
